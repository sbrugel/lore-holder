<!-- HTML for the new/edit character dialog, accessible from the World Viewer -->
<h2 mat-dialog-title>Create New Character</h2>
<mat-dialog-content>
    <form #characterForm="ngForm" novalidate>
        <div class="dialog-form">
            <mat-form-field class="example-full-width">
                <input matInput placeholder="Character Name" [(ngModel)]="characterName" name="characterName" required>
                <mat-error *ngIf="characterForm.controls['characterName']?.invalid">
                    Character Name is required.
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <textarea matInput #desc placeholder="Character Description" [(ngModel)]="characterDescription" maxlength="500" name="characterDescription"></textarea>
                <mat-hint align="start">A brief intro to your character</mat-hint>
                <mat-hint align="end">{{desc.value.length}} / 500</mat-hint>
            </mat-form-field>
            
            <mat-form-field class="example-full-width">
                <textarea matInput placeholder="Biography" [(ngModel)]="characterBio" name="characterBio"></textarea>
                <mat-hint align="start">Extensive information about your character</mat-hint>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <input matInput placeholder="Image URL" [(ngModel)]="characterImageUrl" name="characterImageUrl" required pattern="https?://.+">
                <mat-error *ngIf="characterForm.controls['characterImageUrl']?.errors?.['required']">
                    Image URL is required.
                </mat-error>
                <mat-error *ngIf="characterForm.controls['characterImageUrl']?.errors?.['pattern']">
                    Must be a valid URL (must start with http:// or https://).
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <input matInput type="number" placeholder="Age" [(ngModel)]="characterAge" name="characterAge" (keypress)="allowOnlyNumbers($event)">
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <input matInput placeholder="Gender" [(ngModel)]="characterGender" name="characterGender">
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <input matInput placeholder="Race" [(ngModel)]="characterRace" name="characterRace">
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <input matInput placeholder="Pronouns" [(ngModel)]="characterPronouns" name="characterPronouns">
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <textarea matInput placeholder="Colors" [(ngModel)]="characterColors" name="characterColors"></textarea>
                <mat-hint align="start">One hex code (i.e. "#0000ff") per line</mat-hint>
            </mat-form-field>

            <mat-form-field class="example-full-width">
                <textarea matInput placeholder="Gallery Links" [(ngModel)]="characterGalleryLinks" name="characterGalleryLinks"></textarea>
                <mat-hint align="start">One URL per line</mat-hint>
            </mat-form-field>

            <p><em>Custom details can be added in the character viewer page.</em></p>
        </div>
    </form>
</mat-dialog-content>
<mat-dialog-actions>
    <button 
        mat-button 
        [mat-dialog-close]="{characterName: characterName, characterDescription: characterDescription, characterBio: characterBio, characterImageUrl: characterImageUrl, characterAge: characterAge, characterGender: characterGender, characterRace: characterRace, characterPronouns: characterPronouns, characterColors: characterColors, characterGalleryLinks: characterGalleryLinks}" 
        [disabled]="characterForm.invalid"
    >CREATE</button>
</mat-dialog-actions>
